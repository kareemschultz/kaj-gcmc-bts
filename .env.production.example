# KAJ-GCMC BTS Platform - Production Environment Configuration
# Copy this file to .env.production and fill in the values for production deployment

# ===============================
# CORE APPLICATION CONFIGURATION
# ===============================

# Environment
NODE_ENV=production

# Application URLs (REQUIRED)
WEB_URL=https://app.gcmc-kaj.com
PORTAL_URL=https://portal.gcmc-kaj.com
API_URL=https://api.gcmc-kaj.com

# ===============================
# DATABASE CONFIGURATION
# ===============================

# PostgreSQL Database (REQUIRED)
DATABASE_URL="postgresql://username:password@localhost:5432/gcmc_kaj_production?schema=public"

# Database SSL Configuration (recommended for production)
DATABASE_SSL=true
DATABASE_SSL_REJECT_UNAUTHORIZED=true

# Database Connection Pool
DATABASE_POOL_MIN=5
DATABASE_POOL_MAX=20

# ===============================
# AUTHENTICATION & SECURITY
# ===============================

# Better-Auth Secret (REQUIRED - minimum 32 characters)
NEXTAUTH_SECRET="your-super-secure-secret-key-minimum-32-characters-long"

# Session Configuration
SESSION_MAX_AGE=604800  # 7 days
SESSION_UPDATE_AGE=86400  # 1 day

# Cookie Configuration
COOKIE_DOMAIN=".gcmc-kaj.com"
COOKIE_SECURE=true
COOKIE_SAME_SITE=lax

# CSRF Protection
CSRF_SECRET="your-csrf-secret-minimum-32-characters"

# Account Lockout Settings
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_TIME=300000  # 5 minutes in milliseconds

# Password Requirements
MIN_PASSWORD_LENGTH=12
REQUIRE_PASSWORD_COMPLEXITY=true

# ===============================
# CORS & API SECURITY
# ===============================

# CORS Origins (REQUIRED)
CORS_ORIGIN="https://app.gcmc-kaj.com,https://portal.gcmc-kaj.com"

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100

# API Keys for external services
# EXTERNAL_API_KEY="your-external-api-key"

# ===============================
# REDIS CONFIGURATION
# ===============================

# Redis for session storage and caching (REQUIRED)
REDIS_URL="redis://username:password@localhost:6379"

# Redis SSL Configuration
REDIS_TLS=true

# Session Store Configuration
SESSION_STORE_PREFIX="sess:"
SESSION_STORE_TTL=604800  # 7 days

# ===============================
# FILE STORAGE (MinIO/S3)
# ===============================

# MinIO Configuration (REQUIRED)
MINIO_ENDPOINT="minio.gcmc-kaj.com"
MINIO_PORT=9000
MINIO_USE_SSL=true
MINIO_ACCESS_KEY="your-minio-access-key"
MINIO_SECRET_KEY="your-minio-secret-key"
MINIO_BUCKET_NAME="gcmc-kaj-documents"

# File Upload Limits
MAX_FILE_SIZE=52428800  # 50MB in bytes
MAX_TOTAL_FILES=100

# Allowed File Types
ALLOWED_FILE_TYPES="application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,text/csv,image/jpeg,image/png,image/webp"

# ===============================
# EMAIL CONFIGURATION
# ===============================

# SMTP Configuration for production emails
SMTP_HOST="smtp.yourprovider.com"
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER="noreply@gcmc-kaj.com"
SMTP_PASS="your-smtp-password"

# Email Templates
FROM_EMAIL="GCMC-KAJ Platform <noreply@gcmc-kaj.com>"
SUPPORT_EMAIL="support@gcmc-kaj.com"

# ===============================
# LOGGING & MONITORING
# ===============================

# Log Level (error, warn, info, debug)
LOG_LEVEL=info

# External Logging Service
# DATADOG_API_KEY="your-datadog-api-key"
# SENTRY_DSN="your-sentry-dsn"

# Application Monitoring
ENABLE_METRICS=true
METRICS_PORT=9090

# ===============================
# SSL/TLS CONFIGURATION
# ===============================

# SSL Certificate Paths (if not using reverse proxy)
# SSL_CERT_PATH="/path/to/certificate.crt"
# SSL_KEY_PATH="/path/to/private-key.key"

# HSTS Configuration
HSTS_MAX_AGE=31536000  # 1 year
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true

# ===============================
# BACKUP & DISASTER RECOVERY
# ===============================

# Database Backup Configuration
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET="gcmc-kaj-backups"

# ===============================
# COMPLIANCE & AUDIT
# ===============================

# Audit Logging
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years for compliance

# Data Retention Policies
USER_DATA_RETENTION_DAYS=2555  # 7 years
SESSION_LOG_RETENTION_DAYS=90
ERROR_LOG_RETENTION_DAYS=365

# GDPR Compliance
GDPR_ENABLED=true
DATA_EXPORT_ENABLED=true
RIGHT_TO_BE_FORGOTTEN_ENABLED=true

# ===============================
# PERFORMANCE & SCALING
# ===============================

# Caching
CACHE_TTL_DEFAULT=3600  # 1 hour
CACHE_TTL_STATIC=86400  # 1 day

# CDN Configuration
CDN_ENABLED=true
CDN_URL="https://cdn.gcmc-kaj.com"

# Database Read Replicas
# READ_REPLICA_URL="postgresql://username:password@read-replica:5432/gcmc_kaj_production"

# ===============================
# INTEGRATION SERVICES
# ===============================

# Payment Processing (if needed)
# STRIPE_PUBLIC_KEY="pk_live_..."
# STRIPE_SECRET_KEY="sk_live_..."
# STRIPE_WEBHOOK_SECRET="whsec_..."

# Government API Integration (Guyana Revenue Authority)
# GRA_API_ENDPOINT="https://api.gra.gov.gy"
# GRA_API_KEY="your-gra-api-key"

# ===============================
# WORKER & BACKGROUND JOBS
# ===============================

# Job Queue Configuration
QUEUE_REDIS_URL="redis://username:password@localhost:6379/1"

# Job Concurrency
WORKER_CONCURRENCY=4
WORKER_MAX_MEMORY=512  # MB

# Job Retention
JOB_RETENTION_COMPLETED=24  # hours
JOB_RETENTION_FAILED=168    # hours (7 days)

# ===============================
# HEALTH CHECKS & MONITORING
# ===============================

# Health Check Endpoints
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_TIMEOUT=5000  # 5 seconds

# Database Health Check
DB_HEALTH_CHECK_QUERY="SELECT 1"

# External Service Health Checks
REDIS_HEALTH_CHECK_ENABLED=true
MINIO_HEALTH_CHECK_ENABLED=true

# ===============================
# FEATURE FLAGS & A/B TESTING
# ===============================

# Feature Flags
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_BULK_IMPORT=true
FEATURE_API_V2=false

# A/B Testing
# SPLIT_IO_SDK_KEY="your-split-sdk-key"

# ===============================
# DEVELOPMENT & DEBUG (disable in production)
# ===============================

# Debug Features (DISABLE IN PRODUCTION)
DEBUG_MODE=false
ENABLE_STACK_TRACES=false
SHOW_QUERY_LOGS=false

# Bundle Analysis (for performance monitoring)
ANALYZE_BUNDLE=false

# ===============================
# SECURITY SCANNING & UPDATES
# ===============================

# Security Headers
SECURITY_HEADERS_ENABLED=true
CSP_REPORT_URI="https://yourapp.report-uri.com/r/d/csp/enforce"

# Vulnerability Scanning
# SNYK_TOKEN="your-snyk-token"

# ===============================
# TELEMETRY & ANALYTICS
# ===============================

# Application Telemetry
TELEMETRY_ENABLED=true
ANONYMOUS_TELEMETRY=true

# Usage Analytics
# GOOGLE_ANALYTICS_ID="GA-XXXXXXXXX"

# ===============================
# NOTES FOR PRODUCTION DEPLOYMENT
# ===============================

# 1. Replace all placeholder values with actual production values
# 2. Ensure all secrets are at least 32 characters long
# 3. Use environment-specific secrets for each environment
# 4. Store sensitive values in a secure secret management system (e.g., AWS Secrets Manager, HashiCorp Vault)
# 5. Rotate secrets regularly (every 90 days recommended)
# 6. Use strong, unique passwords for all service accounts
# 7. Enable SSL/TLS for all external connections
# 8. Configure proper firewall rules and network security
# 9. Set up monitoring and alerting for all critical services
# 10. Perform regular security audits and penetration testing