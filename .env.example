# ==============================================================================
# GCMC-KAJ Multi-Tenant SaaS Platform - Environment Variables
# ==============================================================================
# Copy this file to .env and update with your actual values

# ------------------------------------------------------------------------------
# Database Configuration (PostgreSQL)
# ------------------------------------------------------------------------------
# SECURITY: Replace 'postgres' password with a strong password in production
# Generate with: openssl rand -base64 32 | tr -d '/+=' | cut -c1-32
DATABASE_URL="postgresql://postgres:<GENERATE_STRONG_PASSWORD>@localhost:5433/gcmc_kaj"

# ------------------------------------------------------------------------------
# Better-Auth Configuration
# ------------------------------------------------------------------------------
# SECURITY: Generate a new secret key with: openssl rand -base64 32
# REQUIRED: This MUST be changed before deploying to any environment
# Keep this secret secure - it encrypts user sessions
BETTER_AUTH_SECRET="<GENERATE_WITH_openssl_rand_-base64_32>"

# Better-Auth URL (required in production)
BETTER_AUTH_URL="http://localhost:3000"

# Trusted origins for CORS
# IMPORTANT: Supports multiple origins separated by commas for web + portal
# Development (both web and portal):
CORS_ORIGIN="http://localhost:3001,http://localhost:3002"
# Production example:
# CORS_ORIGIN="https://app.yourdomain.com,https://portal.yourdomain.com"

# ------------------------------------------------------------------------------
# Redis Configuration (for BullMQ job queues)
# ------------------------------------------------------------------------------
REDIS_URL="redis://localhost:6379"

# ------------------------------------------------------------------------------
# MinIO Configuration (S3-compatible object storage)
# ------------------------------------------------------------------------------
MINIO_ENDPOINT="localhost"
MINIO_PORT="9000"
MINIO_USE_SSL="false"
# SECURITY: Generate strong credentials for MinIO
# Access key: Use a unique identifier (e.g., "gcmc_kaj_minio_admin")
# Secret key: Generate with: openssl rand -base64 32 | tr -d '/+=' | cut -c1-32
MINIO_ACCESS_KEY="<GENERATE_UNIQUE_USERNAME>"
MINIO_SECRET_KEY="<GENERATE_STRONG_PASSWORD>"
MINIO_REGION="us-east-1"

# ------------------------------------------------------------------------------
# Application Configuration
# ------------------------------------------------------------------------------
# Node environment
NODE_ENV="development"

# Next.js app URL
NEXT_PUBLIC_APP_URL="http://localhost:3001"

# API server URL
NEXT_PUBLIC_API_URL="http://localhost:3000"

# Server URL used by frontend apps for API calls
NEXT_PUBLIC_SERVER_URL="http://localhost:3000"

# Client portal base URL for emails and deep links
PORTAL_URL="http://localhost:3002"

# Support email address for outbound notifications
SUPPORT_EMAIL="support@example.com"

# ------------------------------------------------------------------------------
# Email Configuration (Optional - for notifications)
# ------------------------------------------------------------------------------
# Email provider: "log" (development), "resend", or "smtp"
EMAIL_PROVIDER="log"

# Resend API key (if using Resend)
RESEND_API_KEY=""

# SMTP configuration (if using SMTP)
SMTP_HOST="smtp.example.com"
SMTP_PORT="587"
SMTP_USER="your-email@example.com"
SMTP_PASS="your-smtp-password"
SMTP_FROM="noreply@gcmc-kaj.com"

# ------------------------------------------------------------------------------
# Monitoring & Logging (Optional)
# ------------------------------------------------------------------------------
LOG_LEVEL="info"

# Worker health check port (Note: 3000=api, 3001=web, 3002=portal, 3004=worker-health)
HEALTH_PORT="3004"

# ------------------------------------------------------------------------------
# Feature Flags (Optional)
# ------------------------------------------------------------------------------
ENABLE_EMAIL_NOTIFICATIONS="false"
ENABLE_SMS_NOTIFICATIONS="false"
ENABLE_COMPLIANCE_ENGINE="true"
ENABLE_ANALYTICS="true"

# ------------------------------------------------------------------------------
# Production Configuration (Required in production)
# ------------------------------------------------------------------------------
# PostgreSQL credentials
POSTGRES_DB="gcmc_kaj"
POSTGRES_USER="postgres"
# SECURITY: Generate a strong password with: openssl rand -base64 32 | tr -d '/+=' | cut -c1-32
# NEVER use default passwords in production
POSTGRES_PASSWORD="<GENERATE_STRONG_PASSWORD>"

# MinIO credentials
# SECURITY: Generate unique credentials for MinIO root user
# Root user: Use a unique identifier (not "minioadmin" or "admin")
# Root password: Generate with: openssl rand -base64 32 | tr -d '/+=' | cut -c1-32
# MINIMUM length: 8 characters (MinIO requirement)
MINIO_ROOT_USER="<GENERATE_UNIQUE_USERNAME>"
MINIO_ROOT_PASSWORD="<GENERATE_STRONG_PASSWORD>"

# MinIO bucket prefix for multi-tenant isolation
MINIO_BUCKET_PREFIX="tenant"

# Docker registry for production images
DOCKER_REGISTRY="gcmckaj.azurecr.io"

# Version tag for Docker images
VERSION="latest"

# Service replicas (production scaling)
API_REPLICAS="2"
WEB_REPLICAS="2"
WORKER_REPLICAS="1"
