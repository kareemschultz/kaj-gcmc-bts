apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

metadata:
  name: gcmc-kaj-production

# Reference to base
resources:
  - ../../base

# Production namespace (uses default from base)
namespace: gcmc-kaj

# Production-specific labels
commonLabels:
  environment: production
  tier: production

# Production-specific annotations
commonAnnotations:
  environment: production
  deployment-time: "placeholder"

# No prefix for production (clean resource names)
namePrefix: ""

# Resource patches for production environment
patchesStrategicMerge:
  - patches/production-config.yaml
  - patches/production-secrets.yaml
  - patches/production-resources.yaml
  - patches/production-security.yaml

# ConfigMap for production environment
configMapGenerator:
  - name: env-config
    literals:
      - NODE_ENV=production
      - LOG_LEVEL=warn
      - DEBUG_MODE=false
      - METRICS_ENABLED=true
      - ENABLE_PROFILING=false
      - STRICT_SECURITY=true

# Production replicas (full scale)
replicas:
  - name: gcmc-kaj-api
    count: 5
  - name: gcmc-kaj-web
    count: 3
  - name: gcmc-kaj-portal
    count: 3
  - name: gcmc-kaj-worker
    count: 3

# Production images (using stable tags)
images:
  - name: ghcr.io/your-org/gcmc-kaj/web
    newTag: v1.0.0
  - name: ghcr.io/your-org/gcmc-kaj/server
    newTag: v1.0.0
  - name: ghcr.io/your-org/gcmc-kaj/worker
    newTag: v1.0.0
  - name: ghcr.io/your-org/gcmc-kaj/portal
    newTag: v1.0.0